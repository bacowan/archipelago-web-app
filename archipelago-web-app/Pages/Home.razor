@page "/"
@using archipelago_web_app.Events
@using archipelago_web_app.Models

@inject ArchipelagoSession Session

@if (Session.IsConnectionOpen) {
    <GameHome/>
}
else {
    <ConnectionForm/>
}

@code {

    private void OnConnectionStateChanged(object? sender, ConnectionStateChangedEventArgs e) {
        InvokeAsync(StateHasChanged);
    }

    protected override void OnInitialized() {
        Session.ConnectionStateChanged += OnConnectionStateChanged;
    }
}